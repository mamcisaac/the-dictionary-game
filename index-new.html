<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Dictionary Game</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Skip to main content for keyboard users -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="game-shell">
        <header>
            <h1>The Dictionary Game</h1>
        </header>
        
        <main class="game-prompt" id="main-content">
            <!-- GuessCard Component -->
            <div id="guess-card" class="guess-card" data-variant="default">
                <!-- EmptyState Component -->
                <div id="empty-state" class="empty-state">
                    <h2>Ready to play?</h2>
                    <p>Click <strong>New Game</strong> to start, or tap <span class="help-icon">❓</span> for a 15-sec tour.</p>
                    <button id="empty-state-new-game" class="button-primary">New Game</button>
                </div>
                
                <p class="intro-text" id="intro-text" style="display: none;">Guess the word from its clues.</p>
                
                <div id="my-word" style="display: none;">
                    <div id="word-pattern" class="guess-card__letter"></div>
                </div>
                
                <!-- ClueStripe Components will be dynamically inserted here -->
                <div id="clue-list" class="clue-list" aria-live="polite" aria-label="Game clues"></div>
                <div id="message" class="message-area" role="status" aria-live="assertive" aria-label="Game feedback"></div> 
            </div>
        </main>
        
        <section class="game-actions">
            <div class="input-section" style="display: none;">
                <label for="guess-input" class="sr-only">Enter your word guess</label>
                <input type="text" id="guess-input" placeholder="Enter your guess" aria-describedby="guess-hint" tabindex="1">
                <span id="guess-hint" class="sr-only">Type a word that starts with the given letter and press Enter or click Guess</span>
                <div class="main-buttons">
                    <div class="button-container">
                        <button id="guess-button" tabindex="2">Guess</button>
                        <div id="guess-cost-preview" class="cost-preview" style="display: none;"></div>
                    </div>
                    <div class="button-container">
                        <div class="score-badge-standalone" id="score-badge">
                            <span id="current-score-badge">0</span> pts
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Clue Deck -->
            <div id="mobile-clue-deck" class="mobile-clue-deck" style="display: none;">
                <!-- Clue cards will be dynamically inserted here -->
            </div>
            
            <div class="secondary-buttons">
                <button id="start-game-button">New Game</button>
                <button id="give-up-button" class="secondary-style" disabled aria-disabled="true">Reveal Answer</button>
                <button id="stats-button" disabled aria-disabled="true">Stats</button>
            </div>
        </section>
        
        <aside class="game-sidebar">
            <div class="sidebar-content">
                <!-- Sidebar Placeholder -->
                <div id="sidebar-placeholder" class="sidebar-placeholder">
                    <div class="placeholder-content">
                        <span class="placeholder-label">Game info will appear here</span>
                    </div>
                </div>
                
                <!-- Score Information Panel -->
                <div id="score-container" class="score-info-panel" style="display: none;">
                    <div class="score-section">
                        <span class="score-label">SCORE</span>
                        <span id="current-score" class="score-number" role="status" aria-live="polite">0</span>
                    </div>
                    
                    <div class="divider"></div>
                    
                    <div class="clue-usage-section">
                        <div class="usage-label">
                            <span>Clues Used</span>
                            <span id="clue-counter" class="usage-value">0/0</span>
                        </div>
                        <div class="progress-track">
                            <div id="progress-fill" class="progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>
                    
                    <div class="difficulty-section" title="Score derived from length, rarity, morphology" aria-describedby="difficulty-tooltip">
                        <span class="difficulty-label">Difficulty</span>
                        <span id="difficulty-score" class="difficulty-value">0.00</span>
                        <div class="difficulty-gauge">
                            <div id="difficulty-fill" class="difficulty-gauge-fill" style="width: 0%;"></div>
                        </div>
                        <span id="difficulty-tooltip" class="sr-only">Score derived from length, rarity, morphology</span>
                    </div>
                    
                    <button id="details-toggle" class="details-toggle" aria-expanded="false">
                        <span>Details</span>
                        <span class="toggle-icon">▼</span>
                    </button>
                    
                    <div id="details-section" class="details-section" style="display: none;">
                        <div class="detail-item">
                            <span class="detail-label">• Guesses:</span>
                            <span id="guess-count" class="detail-value">0</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">• Time:</span>
                            <span id="time-elapsed" class="detail-value">0:00</span>
                        </div>
                    </div>
                </div>
                    
                    <!-- Desktop Clue Deck -->
                    <div id="desktop-clue-deck" class="desktop-clue-deck" style="display: none;">
                        <h3 class="clue-deck-title">Available Clues</h3>
                        <div class="clue-cards-container">
                            <!-- Clue cards will be dynamically inserted here -->
                        </div>
                    </div>
                </div>
            </div>
            <button id="help-button" class="help-button" aria-label="Help">
                <span class="sr-only">Open help and tutorial</span>
                ?
            </button>
        </aside>
        
        <footer class="game-footer">
            <!-- Footer content if needed -->
        </footer>
        
        <!-- Toast Component Container -->
        <div id="toast-container" class="toast-container"></div>
            
            <!-- StatModal Component -->
            <div id="stats-modal" class="stat-modal" data-open="false" role="dialog" aria-modal="true" aria-labelledby="stats-modal-title">
                <div class="stat-modal__content">
                    <div class="stat-modal__header">
                        <span id="stats-modal-title">Game Statistics</span>
                        <button class="close" aria-label="Close statistics modal">
                            <span class="sr-only">Close</span>
                            &times;
                        </button>
                    </div>
                    <div class="stat-modal__grid">
                        <div class="stat-modal__stat">
                            <div id="games-played" class="stat-modal__value">0</div>
                            <div class="stat-modal__label">Games Played</div>
                        </div>
                        <div class="stat-modal__stat">
                            <div id="games-won" class="stat-modal__value">0</div>
                            <div class="stat-modal__label">Games Won</div>
                        </div>
                        <div class="stat-modal__stat">
                            <div id="win-rate" class="stat-modal__value">0%</div>
                            <div class="stat-modal__label">Win Rate</div>
                        </div>
                        <div class="stat-modal__stat">
                            <div id="avg-score" class="stat-modal__value">0</div>
                            <div class="stat-modal__label">Average Score</div>
                        </div>
                        <div class="stat-modal__stat">
                            <div id="best-score" class="stat-modal__value">0</div>
                            <div class="stat-modal__label">Best Score</div>
                        </div>
                        <div class="stat-modal__stat">
                            <div id="current-streak" class="stat-modal__value">0</div>
                            <div class="stat-modal__label">Current Streak</div>
                        </div>
                        <div class="stat-modal__stat">
                            <div id="best-streak" class="stat-modal__value">0</div>
                            <div class="stat-modal__label">Best Streak</div>
                        </div>
                    </div>
                    
                    <!-- Heat-map Calendar -->
                    <div class="heat-map-calendar">
                        <div class="heat-map-header">Win History</div>
                        <div id="heat-map-grid" class="heat-map-grid">
                            <!-- Calendar grid will be generated here -->
                        </div>
                        <div class="heat-map-legend">
                            <span>Less</span>
                            <div class="heat-map-legend-squares">
                                <div class="heat-map-day" data-wins="0"></div>
                                <div class="heat-map-day" data-wins="1"></div>
                                <div class="heat-map-day" data-wins="2"></div>
                                <div class="heat-map-day" data-wins="3"></div>
                                <div class="heat-map-day" data-wins="4"></div>
                            </div>
                            <span>More</span>
                        </div>
                    </div>
                    
                    <div style="margin-top: var(--space-6); text-align: center;">
                        <button id="reset-stats" class="secondary-buttons">Reset Statistics</button>
                    </div>
                </div>
            </div>
            
            <!-- Help/Tutorial Modal -->
            <div id="help-modal" class="modal" style="display: none;" role="dialog" aria-modal="true" aria-labelledby="help-modal-title">
                <div class="modal-content">
                    <button class="close-help" aria-label="Close help modal">
                        <span class="sr-only">Close</span>
                        &times;
                    </button>
                    <h2 id="help-modal-title">How to Play</h2>
                    <div id="help-content">
                        <div class="help-section">
                            <h3>Quick Guide</h3>
                            <div class="help-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <p><strong>Start</strong> — Click <strong>New Game</strong> to see the word's first letter and one definition.</p>
                                </div>
                            </div>
                            
                            <div class="help-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <p><strong>Guess</strong> — Enter any word beginning with that letter and press <strong>Enter</strong>.</p>
                                </div>
                            </div>
                            
                            <div class="help-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <p><strong>Need a hint?</strong> — Click \"Get a Clue\" to see available clue types and their <strong>dynamic costs</strong>.</p>
                                </div>
                            </div>
                            
                            <div class="help-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <p><strong>Clue types</strong> — Definitions, word length, examples, synonyms/antonyms, and letter reveals. <strong>Costs vary by information value.</strong></p>
                                </div>
                            </div>
                            
                            <div class="help-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <p><strong>Smart Scoring</strong> — Your score depends on <strong>word difficulty</strong>, clue efficiency, and solving speed. Harder words = higher potential scores!</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="help-section">
                            <h3>Advanced Scoring System</h3>
                            
                            <div class="help-subsection">
                                <h4>🎯 Difficulty-Aware Scoring</h4>
                                <p>Each word has a difficulty score (0-1) based on length, rarity, and complexity. Harder words offer <strong>300-600 base points</strong>, while easier words start lower.</p>
                            </div>
                            
                            <div class="help-subsection">
                                <h4>💡 Dynamic Clue Costs</h4>
                                <p>Clue costs are calculated using <strong>information theory</strong>:</p>
                                <ul>
                                    <li><strong>Additional Definition:</strong> ~10 points</li>
                                    <li><strong>Word Length:</strong> ~13 points</li>
                                    <li><strong>Example Sentence:</strong> ~18 points</li>
                                    <li><strong>Synonyms/Antonyms:</strong> ~20 points</li>
                                    <li><strong>Letter Reveal:</strong> ~56 points (decreases as more revealed)</li>
                                </ul>
                            </div>
                            
                            <div class="help-subsection">
                                <h4>⚡ Bonuses & Penalties</h4>
                                <ul>
                                    <li><strong>First Guess Bonus:</strong> +50 points for perfect insight</li>
                                    <li><strong>Guess Penalties:</strong> Free for guesses 1-5, then -5 points each</li>
                                    <li><strong>Time Decay:</strong> Gentle quadratic decay encourages momentum</li>
                                </ul>
                            </div>
                            
                            <div class="help-subsection">
                                <h4>🏆 Final Score</h4>
                                <p>All scores are normalized to <strong>0-1000 scale</strong> for fair comparison across different words and sessions. Perfect scores on hardest words can reach 1000!</p>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Load JavaScript modules -->
    <script src="src/data/i18n.js"></script>
    <script src="src/js/scoring.js"></script>
    <script src="src/js/game-state.js"></script>
    <script src="src/js/components.js"></script>
    <script src="script.js"></script>
    <script src="src/js/main.js"></script>
</body>
</html>